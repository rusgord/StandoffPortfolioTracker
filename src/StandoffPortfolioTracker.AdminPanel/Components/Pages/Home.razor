@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@using StandoffPortfolioTracker.AdminPanel.Services
@inject AuthenticationStateProvider AuthStateProvider
@inject NavigationManager NavManager
@inject ItemService ItemService
@inject IJSRuntime JS

<PageTitle>Standoff Tracker — Профессиональная аналитика</PageTitle>

<div class="landing-wrapper">

    <header class="hero-section position-relative overflow-hidden">
        <div class="container position-relative z-2">
            <div class="row align-items-center min-vh-75 py-5 justify-content-center">

                <div class="col-xl-5 col-lg-6 text-center text-lg-start mb-5 mb-lg-0 hero-text-anim">
                    <div class="d-inline-block border border-primary border-opacity-25 bg-white text-primary px-3 py-2 rounded-pill mb-4 fw-bold shadow-sm">
                        🚀 Версия 2.0 уже доступна
                    </div>
                    <h1 class="display-3 fw-bolder text-dark mb-4 lh-sm">
                        Управляй инвентарем <br />
                        <span class="text-gradient-primary">как профессионал</span>
                    </h1>
                    <p class="lead text-secondary mb-5 pe-lg-5 fw-medium">
                        Единственный инструмент, который нужен трейдеру. Отслеживай ROI, анализируй историю цен и находи самые выгодные скины за секунды.
                    </p>

                    <div class="d-flex gap-3 justify-content-center justify-content-lg-start">
                        <AuthorizeView>
                            <Authorized>
                                <a href="dashboard" class="btn btn-primary btn-lg rounded-pill px-5 py-3 fw-bold shadow-lg hover-up transition-all">
                                    <i class="bi bi-speedometer2 me-2"></i> Открыть Дашборд
                                </a>
                            </Authorized>
                            <NotAuthorized>
                                <a href="Identity/Account/Register" class="btn btn-primary btn-lg rounded-pill px-5 py-3 fw-bold shadow-lg hover-up transition-all">
                                    Начать бесплатно
                                </a>
                                <a href="#features" class="btn btn-white btn-lg rounded-pill px-4 py-3 fw-bold border hover-up transition-all text-dark">
                                    Узнать больше
                                </a>
                            </NotAuthorized>
                        </AuthorizeView>
                    </div>

                    <div class="mt-4 pt-3 d-flex align-items-center gap-3 justify-content-center justify-content-lg-start text-secondary small fw-bold">
                        <div class="d-flex">
                            <i class="bi bi-star-fill text-gold"></i>
                            <i class="bi bi-star-fill text-gold"></i>
                            <i class="bi bi-star-fill text-gold"></i>
                            <i class="bi bi-star-fill text-gold"></i>
                            <i class="bi bi-star-fill text-gold"></i>
                        </div>
                        <span>Выбор 5,000+ трейдеров</span>
                    </div>
                </div>

                <div class="col-xl-6 col-lg-6 hero-img-anim">
                    <div class="hero-image-container position-relative ms-lg-auto" style="max-width: 600px;">
                        <div class="absolute-blob blob-1"></div>
                        <div class="absolute-blob blob-2"></div>

                        <div class="app-mockup shadow-2xl floating-animation bg-white">
                            <div class="mockup-header">
                                <div class="dots"><span></span><span></span><span></span></div>
                                <div class="url-bar">standoff-tracker.com/dashboard</div>
                            </div>
                            <div class="mockup-body p-4">
                                <div class="d-flex justify-content-between mb-4 align-items-end">
                                    <div>
                                        <div class="text-secondary small fw-bold text-uppercase ls-1 mb-1">Общая стоимость</div>
                                        <h3 class="fw-bolder text-dark m-0 display-6">
                                            @mockupTotalValue.ToString("N0") <span class="text-gold">G</span>
                                        </h3>
                                    </div>
                                    <div class="badge bg-success bg-opacity-10 text-success border border-success border-opacity-25 px-3 py-2 rounded-pill fw-bold">
                                        <i class="bi bi-graph-up-arrow me-1"></i> +12.5%
                                    </div>
                                </div>

                                <div class="graph-placeholder rounded-3 overflow-hidden position-relative mb-4" style="height: 180px; background: #f8f9fa;">
                                    <svg viewBox="0 0 500 150" class="w-100 h-100" preserveAspectRatio="none">
                                        <path d="M0,120 C100,100 200,140 300,80 S400,20 500,60" stroke="#4e73df" stroke-width="4" fill="none" stroke-linecap="round" />
                                        <path d="M0,120 C100,100 200,140 300,80 S400,20 500,60 L500,150 L0,150 Z" fill="url(#grad1)" opacity="0.15" />
                                        <defs>
                                            <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
                                                <stop offset="0%" style="stop-color:#4e73df;stop-opacity:1" />
                                                <stop offset="100%" style="stop-color:#4e73df;stop-opacity:0" />
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                </div>

                                <div class="d-flex gap-3">
                                    @if (showcaseItems != null && showcaseItems.Any())
                                    {
                                        @foreach (var item in showcaseItems)
                                        {
                                            <div class="mini-card flex-grow-1 p-2 rounded-3 border bg-white shadow-sm d-flex align-items-center gap-3">
                                                <div class="mini-img-box rounded-2 bg-light d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                                    <img src="@item.ImageUrl" style="max-width: 90%; max-height: 90%; object-fit: contain;" />
                                                </div>
                                                <div style="min-width: 0;">
                                                    <div class="fw-bold text-dark mb-0 text-truncate" style="font-size: 0.85rem;">@item.SkinName</div>
                                                    <div class="fw-bolder text-dark small">
                                                        @item.Price.ToString("N0") <span class="text-gold">G</span>
                                                    </div>
                                                    <div class="text-success fw-bold" style="font-size: 0.65rem;">
                                                        <i class="bi bi-caret-up-fill"></i> +@item.GrowthPercent.ToString("N1")%
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    }
                                    else
                                    {
                                        <div class="w-100 text-center py-2 text-secondary small">
                                            <div class="spinner-border spinner-border-sm text-primary mb-1"></div>
                                            <div>Загрузка рынка...</div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="hero-wave">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none" style="display: block; width: 100%; height: 100%;">
                <path fill="#1a1d21" fill-opacity="1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
            </svg>
        </div>
    </header>

    <section class="stats-section bg-dark text-white py-5 position-relative z-2" style="margin-top: -1px;">
        <div class="container">
            <div class="row text-center g-4 justify-content-center">
                <div class="col-md-3 col-6 border-end border-secondary">
                    <div class="display-5 fw-bolder mb-1">10k+</div>
                    <div class="text-white-50 small text-uppercase fw-bold ls-1">Пользователей</div>
                </div>
                <div class="col-md-3 col-6 border-end border-secondary">
                    <div class="display-5 fw-bolder text-gold mb-1">500M</div>
                    <div class="text-white-50 small text-uppercase fw-bold ls-1">Голды отслежено</div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="display-5 fw-bolder mb-1">24/7</div>
                    <div class="text-white-50 small text-uppercase fw-bold ls-1">Мониторинг</div>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="features-section py-6 bg-light">
        <div class="container">
            <div class="text-center mb-6 mw-800 mx-auto">
                <h6 class="text-primary fw-bold text-uppercase ls-2 mb-3">Возможности</h6>
                <h2 class="display-4 fw-bold text-dark mb-4">Всё для успешного трейда</h2>
                <p class="text-secondary fs-5">Профессиональные инструменты в удобном интерфейсе</p>
            </div>

            <div class="row g-4">
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card h-100 p-4 rounded-4 bg-white border-0 shadow-sm hover-up text-center">
                        <div class="icon-circle bg-primary bg-opacity-10 text-primary mx-auto mb-4">
                            <i class="bi bi-wallet2"></i>
                        </div>
                        <h4 class="fw-bold text-dark mb-3">Умный Портфель</h4>
                        <p class="text-secondary">Автоматический подсчет стоимости инвентаря и чистой прибыли.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card h-100 p-4 rounded-4 bg-white border-0 shadow-sm hover-up text-center">
                        <div class="icon-circle bg-warning bg-opacity-10 text-warning mx-auto mb-4">
                            <i class="bi bi-graph-up-arrow"></i>
                        </div>
                        <h4 class="fw-bold text-dark mb-3">Анализ Рынка</h4>
                        <p class="text-secondary">История цен за 90 дней. Находите идеальные моменты для сделок.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card h-100 p-4 rounded-4 bg-white border-0 shadow-sm hover-up text-center">
                        <div class="icon-circle bg-success bg-opacity-10 text-success mx-auto mb-4">
                            <i class="bi bi-funnel"></i>
                        </div>
                        <h4 class="fw-bold text-dark mb-3">Фильтры</h4>
                        <p class="text-secondary">Поиск по коллекциям, типам, паттернам и наклейкам.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card h-100 p-4 rounded-4 bg-white border-0 shadow-sm hover-up text-center">
                        <div class="icon-circle bg-danger bg-opacity-10 text-danger mx-auto mb-4">
                            <i class="bi bi-shield-check"></i>
                        </div>
                        <h4 class="fw-bold text-dark mb-3">Приватность</h4>
                        <p class="text-secondary">Скрывайте свой профиль или делитесь им с друзьями.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card h-100 p-4 rounded-4 bg-white border-0 shadow-sm hover-up text-center">
                        <div class="icon-circle bg-info bg-opacity-10 text-info mx-auto mb-4">
                            <i class="bi bi-newspaper"></i>
                        </div>
                        <h4 class="fw-bold text-dark mb-3">Новости</h4>
                        <p class="text-secondary">Следите за обновлениями игры и экономики.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="feature-card h-100 p-4 rounded-4 bg-white border-0 shadow-sm hover-up text-center">
                        <div class="icon-circle bg-dark bg-opacity-10 text-dark mx-auto mb-4">
                            <i class="bi bi-stars text-gold"></i>
                        </div>
                        <h4 class="fw-bold text-dark mb-3">Premium</h4>
                        <p class="text-secondary">Расширенная аналитика и приоритетная поддержка.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="steps-section py-6 bg-white position-relative">
        <div class="container position-relative z-2">
            <div class="text-center mb-6">
                <h2 class="fw-bold display-5 text-dark mb-3">Путь к профиту</h2>
                <p class="text-secondary fs-5">Всего 3 простых шага</p>
            </div>

            <div class="timeline-wrapper">
                <div class="timeline-line d-none d-lg-block"></div>

                <div class="row g-4">
                    <div class="col-lg-4">
                        <div class="step-item text-center">
                            <div class="step-icon-wrapper mb-4">
                                <div class="step-icon bg-white shadow-lg text-primary">
                                    <i class="bi bi-person-plus-fill"></i>
                                </div>
                                <div class="step-badge">1</div>
                            </div>
                            <h4 class="fw-bold text-dark mb-3">Регистрация</h4>
                            <p class="text-secondary px-4">Создайте аккаунт за 30 секунд.</p>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="step-item text-center">
                            <div class="step-icon-wrapper mb-4">
                                <div class="step-icon bg-white shadow-lg text-warning">
                                    <i class="bi bi-bag-plus-fill"></i>
                                </div>
                                <div class="step-badge">2</div>
                            </div>
                            <h4 class="fw-bold text-dark mb-3">Добавление Скинов</h4>
                            <p class="text-secondary px-4">Занесите свой инвентарь в портфель.</p>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="step-item text-center">
                            <div class="step-icon-wrapper mb-4">
                                <div class="step-icon bg-white shadow-lg text-success">
                                    <i class="bi bi-graph-up-arrow"></i>
                                </div>
                                <div class="step-badge">3</div>
                            </div>
                            <h4 class="fw-bold text-dark mb-3">Профит</h4>
                            <p class="text-secondary px-4">Следите за ростом цен и продавайте.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="cta-section py-6 bg-light">
        <div class="container">
            <div class="cta-box cta-box-glow rounded-5 p-5 text-center position-relative overflow-hidden shadow-lg">
                <div class="position-relative z-2 py-4">
                    <h2 class="display-4 fw-bold text-white mb-4">Готовы начать зарабатывать?</h2>
                    <p class="fs-5 text-white-50 mb-5 mx-auto opacity-75" style="max-width: 600px;">
                        Присоединяйтесь к тысячам трейдеров, которые уже увеличили свой капитал с помощью Standoff Tracker.
                    </p>

                    <a href="Identity/Account/Register" class="btn btn-gold-glow btn-lg rounded-pill px-5 py-3 fw-bold text-dark shadow-lg hover-scale">
                        Создать аккаунт бесплатно
                    </a>
                </div>

                <div class="cta-overlay"></div>
                <div class="particles">
                    <div class="particle p1"></div><div class="particle p2"></div><div class="particle p3"></div>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-5 bg-white border-top">
        <div class="container text-center">
            <div class="mb-4 d-flex align-items-center justify-content-center gap-2">
                <i class="bi bi-graph-up-arrow text-warning fs-4"></i>
                <span class="fw-bold text-dark fs-4">STANDOFF TRACKER</span>
            </div>
            <p class="text-secondary mb-0 small">&copy; @DateTime.Now.Year Standoff Tracker. Все права защищены.</p>
        </div>
    </footer>

</div>

@code {
    private List<ItemService.ShowcaseItemDto> showcaseItems = new();
    private decimal mockupTotalValue = 24500;

    protected override async Task OnInitializedAsync()
    {
        showcaseItems = await ItemService.GetDailyShowcaseAsync();
        if (showcaseItems.Any())
        {
            mockupTotalValue = showcaseItems.Sum(x => x.Price) + 15000;
        }
    }
}

<style>
    /* === ЦВЕТА === */
    .text-gold {
        color: #FFD700 !important;
        font-weight: 800;
    }

    .text-dark {
        color: #1a1d21 !important;
    }

    .text-secondary {
        color: #64748b !important;
    }

    .bg-dark {
        background-color: #1a1d21 !important;
    }

    .text-primary-gradient {
        background: linear-gradient(135deg, #4e73df 0%, #224abe 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .ls-1 {
        letter-spacing: 1px;
    }

    .ls-2 {
        letter-spacing: 2px;
    }

    .py-6 {
        padding-top: 6rem;
        padding-bottom: 6rem;
    }

    /* === HERO ANIMATIONS (CSS Only) === */
    .hero-text-anim {
        animation: fadeInUp 0.8s ease-out forwards;
    }

    .hero-img-anim {
        animation: fadeInRight 1s ease-out forwards;
        opacity: 0;
        animation-delay: 0.3s;
    }

    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @@keyframes fadeInRight {
        from {
            opacity: 0;
            transform: translateX(30px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    /* === УБРАЛ ВСЮ ЛОГИКУ JS-АНИМАЦИЙ === */
    /* Теперь блоки просто видны всегда */

    /* === FEATURES === */
    .icon-circle {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        transition: transform 0.3s ease;
    }

    .feature-card:hover .icon-circle {
        transform: scale(1.1) rotate(5deg);
    }

    .hover-up {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        .hover-up:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1) !important;
        }

    /* === TIMELINE STEPS === */
    .timeline-wrapper {
        position: relative;
    }

    .timeline-line {
        position: absolute;
        top: 40px;
        left: 0;
        width: 100%;
        height: 2px;
        background-image: linear-gradient(to right, #dee2e6 50%, rgba(255,255,255,0) 0%);
        background-position: bottom;
        background-size: 20px 2px;
        background-repeat: repeat-x;
        z-index: 0;
    }

    .step-item {
        position: relative;
        z-index: 1;
    }

    .step-icon-wrapper {
        display: inline-block;
        position: relative;
        background: white;
        padding: 0 10px;
    }

    .step-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        border: 1px solid #f1f5f9;
    }

    .step-badge {
        position: absolute;
        top: 0;
        right: -5px;
        width: 30px;
        height: 30px;
        background: #4e73df;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        border: 2px solid white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    /* === MOCKUP === */
    .floating-animation {
        animation: float 6s ease-in-out infinite;
    }

    @@keyframes float {
        0% {
            transform: translateY(0px);
        }

        50% {
            transform: translateY(-15px);
        }

        100% {
            transform: translateY(0px);
        }
    }

    .app-mockup {
        background: #fff;
        border-radius: 16px;
        border: 1px solid rgba(0,0,0,0.08);
    }

    .mockup-header {
        background: #f8f9fa;
        padding: 12px 16px;
        border-bottom: 1px solid #eee;
        border-radius: 16px 16px 0 0;
        display: flex;
        align-items: center;
    }

    .dots span {
        display: inline-block;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #ddd;
        margin-right: 6px;
    }

        .dots span:nth-child(1) {
            background: #ff5f57;
        }

        .dots span:nth-child(2) {
            background: #febc2e;
        }

        .dots span:nth-child(3) {
            background: #28c840;
        }

    .url-bar {
        background: #fff;
        border-radius: 6px;
        padding: 4px 12px;
        font-size: 0.75rem;
        color: #aaa;
        margin-left: 20px;
        flex-grow: 1;
        text-align: center;
        font-weight: 500;
        border: 1px solid #eee;
    }

    /* === CTA BOX & BUTTON === */
    .cta-box-glow {
        background-color: #1a1d21;
        background: radial-gradient(circle at top right, #2c3036 0%, #1a1d21 100%);
        border: 1px solid rgba(255,255,255,0.05);
        box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        color: white !important;
    }

    /* Анимированная кнопка */
    .btn-gold-glow {
        background: linear-gradient(90deg, #FFD700 0%, #FFA500 50%, #FFD700 100%);
        background-size: 200% auto;
        border: none;
        color: #000 !important;
        position: relative;
        z-index: 5;
        overflow: hidden;
        transition: all 0.3s ease;
        animation: pulse-shadow 2s infinite;
    }

        .btn-gold-glow:hover {
            transform: translateY(-3px);
            background-position: right center;
        }

        .btn-gold-glow::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
            transform: skewX(-20deg);
            animation: shine-sweep 3s infinite ease-in-out;
            pointer-events: none;
        }

    @@keyframes pulse-shadow {
        0% {
            box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.6);
        }

        70% {
            box-shadow: 0 0 0 15px rgba(255, 215, 0, 0);
        }

        100% {
            box-shadow: 0 0 0 0 rgba(255, 215, 0, 0);
        }
    }

    @@keyframes shine-sweep {
        0% {
            left: -100%;
        }

        20% {
            left: 200%;
        }

        100% {
            left: 200%;
        }
    }

    .cta-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        opacity: 0.5;
        z-index: 1;
    }
</style>